#
# #  1/26/99         - IBM SP version
# #  2/10/99         -   can do 2d and 1d e-grids


set -x
pwd

PLOT=/nfsuser/g01/wx20mb/plot/cntr.x
#PLOT=/emcsrc/wx20hc/plotgrb/cntr.x
EXindx=/nwprod/util/exec/grbindex

INPUT=WRFPRS24.tm00
#INPUT=meso.AWIP3D
#INPUT=/ptmp/wx20hc/edasetap.2001080100/AWIP3D03.tm06

$EXindx  ${INPUT}   EGRD18.indx

cat > color_cards <<EOF3
  255.00   30
  260.00   29
  265.00   28
  270.00   27
  275.00   24
  280.00   23
  285.00   22
  290.00   21
  295.00   18
EOF3

cat > cntrl_plot << EOF
${INPUT}
EGRD18.indx
color_cards
plot_cards
EOF


cat > plot_cards << EOF2
    1    1     39.50     97.50  209  149    0  99999.99
    2  102    0 -1 SLP (MB)              4.00    0.00    0.00    0 2000      00
    1    1     39.50     97.50  209  149    0  99999.99
    1    1    0 -1 SURFACE PRESS         0.00    0.00    0.00    0 2000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7    1    0 -1 SFC H                 0.00    0.00    0.00    0 2000      00
    1    1     39.50     97.50  209  149    0  99999.99
  132  116    0 -1 BLI                   0.00    0.00    0.00    0 2000      00
    1    1     39.50     97.50  209  149    0  99999.99
  157    1    0 -1 CAPE                  0.00    0.00    0.00    0 2000      00
    1    1     39.50     97.50  209  149    0  99999.99
  226  109    0 -1 MASTER LENGTH SCALE   0.00    0.00    0.00    0 2000      00
    1    1     39.50     97.50  209  149    0  99999.99
   61    1    0 -1Accum Precip (mm)      0.00    0.00    0.00    0 1000      00 
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  200 -1 z lvl200             60.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  300 -1 z lvl300             60.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  400 -1 z lvl400             60.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  500 -1 z lvl500             60.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  600 -1 z lvl600             30.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  700 -1 z lvl700             30.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  800 -1 z lvl800             30.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7  100  900 -1 z lvl900             30.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  200 -1 200 mb thet           3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  300 -1300 mb thet            3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  400 -1400 mb thet            3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  500 -1500 mb thet            3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  600 -1600 mb thet            3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  700 -1700 mb thet            3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  800 -1800 mb thet            3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  900 -1900 mb thet            3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  200 -1200mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  300 -1300mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  400 -1400mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  500 -1500mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  600 -1600mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  700 -1700mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  800 -1800mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  100  900 -1900mb Temp             2.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  200 -1200mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  300 -1300mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  400 -1400mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  500 -1500mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  600 -1600mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  700 -1700mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  800 -1800mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  100  900 -1900mb RH              10.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  200 -1200mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  300 -1300mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  400 -1400mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  500 -1500mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  600 -1600mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  700 -1700mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  800 -1800mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  900 -1900mb omeg            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  200 -1200mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  300 -1300mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  400 -1400mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  500 -1500mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  600 -1600mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  700 -1700mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  800 -1800mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  900 -1900mb vort            00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  200 -1200mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  300 -1300mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  400 -1400mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  500 -1500mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  600 -1600mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  700 -1700mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  800 -1800mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  900 -1900mb cloud water     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   32  100  200 -1200mb wind speed      03.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   32  100  300 -1300mb wind speed      03.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   32  100  400 -1400mb wind speed      03.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   32  100  500 -1500mb wind speed      03.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   32  100  600 -1600mb wind speed      03.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   32  100  700 -1700mb wind speed      03.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   32  100  800 -1800mb wind speed      03.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  153  100  900 -1900mb wind speed      03.00    0.00    0.00    0 1000      00
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  200 -1                       2.00    4.00    0.00    0 1000      01
   34  100  200 -1 winds     200         2.00    4.00    0.00    0 1000      01
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  300 -1                       2.00    4.00    0.00    0 1000      01
   34  100  300 -1 winds     300         2.00    4.00    0.00    0 1000      01
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  400 -1                       2.00    4.00    0.00    0 1000      01
   34  100  400 -1 winds     400         2.00    4.00    0.00    0 1000      01
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  500 -1                       2.00    4.00    0.00    0 1000      01
   34  100  500 -1 winds     500         2.00    4.00    0.00    0 1000      01
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  600 -1                       2.00    4.00    0.00    0 1000      01
   34  100  600 -1 winds     600         2.00    4.00    0.00    0 1000      01
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  700 -1                       2.00    4.00    0.00    0 1000      01
   34  100  700 -1 winds     700         2.00    4.00    0.00    0 1000      01
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  800 -1                       2.00    4.00    0.00    0 1000      01
   34  100  800 -1 winds     800         2.00    4.00    0.00    0 1000      01
    2    1     39.50     97.50  209  149    0  99999.99
   33  100  900 -1                       2.00    4.00    0.00    0 1000      01
   34  100  900 -1 winds     900         2.00    4.00    0.00    0 1000      01
    1    1     39.50     97.50  209  149    0  99999.99
   11  105  002 -1Shelter Temp          00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   52  105  002 -1Shelter RH            00.00    0.00    0.00    0 1000      00
    2    1     39.50     97.50  209  149    0  99999.99
   33  105  010 -1                       2.00    4.00    0.00    0 1000      01
   34  105  010 -1Shelter Wind           2.00    4.00    0.00    0 1000      01
    1    1     39.50     97.50  209  149    0  99999.99
   13  105  010 -110m theta             00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   51  105  010 -110 m specific hum     00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
    7    4  000 -1Freezing level H      00.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   11  103  000 -1TEMP at FD Height     00.00    0.00    0.00    0 1000      00
    2    1     39.50     97.50  209  149    0  99999.99
   33  103  000 -1                       2.00    4.00    0.00    0 1000      01
   34  103  000 -1Wind at FD Height      2.00    4.00    0.00    0 1000      01
    1    1     39.50     97.50  209  149    0  99999.99
   13  100  900 -1 thlvl900              3.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   17  100  900 -1 dewpt900              0.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   35  100  900 -1 strem900              0.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   39  100  900 -1 omega900              0.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
   41  100  900 -1 vort 900              0.00    0.00    0.00    0 1000      00
    1    1     39.50     97.50  209  149    0  99999.99
  135  100  900 -1 mcvg 900              0.00    0.00    0.00    0 1000      00
EOF2

$PLOT < cntrl_plot

exit
9:396536:d=02030500:MCONV:kpds5=135:kpds6=109:kpds7=1:TR=0:P1=18:P2=0:TimeU=1:hybrid lev 1:18hr fcst:NAve=0
10:444124:d=02030500:UGRD:kpds5=33:kpds6=109:kpds7=1:TR=0:P1=18:P2=0:TimeU=1:hybrid lev 1:18hr fcst:NAve=0
11:496990:d=02030500:VGRD:kpds5=34:kpds6=109:kpds7=1:TR=0:P1=18:P2=0:TimeU=1:hybrid lev 1:18hr fcst:NAve=0
12:549856:d=02030500:VVEL:kpds5=39:kpds6=109:kpds7=1:TR=0:P1=18:P2=0:TimeU=1:hybrid lev 1:18hr fcst:NAve=0
13:576336:d=02030500:ABSV:kpds5=41:kpds6=109:kpds7=1:TR=0:P1=18:P2=0:TimeU=1:hybrid lev 1:18hr fcst:NAve=0
14:623924:d=02030500:STRM:kpds5=35:kpds6=109:kpds7=1:TR=0:P1=18:P2=0:TimeU=1:hybrid lev 1:18hr fcst:NAve=0

#
#  MORE DOCUMENTATION...
#
#plot control cards contents/format
#  example:
#   1    1     32.00     85.00  163  163    0  99999.99  TEST RUN #4
# 130  102    0 -1 SLP (MB)              4.00    0.00    0.00    0 2000      00
#
#nfld ntim  clat      clon    npwe  npns llne    spv         title2 
#parm lvlt lvlv tr title1(19 char)     cint    clow    chi     nhi  lw   ndot W
#
#  formats:
#
#(i5)( i5)(  f10.2 )(  f10.2 )( i5)( i5)( i5)(  f10.2 )(    a20             )
#(i5)( i5)( i5)(i3( a19             )( f8.2 )( f8.2 )( f8.2 )( i5)( i5)(  i7 i1
#
#  contents:
#   1st line
#    nfld - number of fields to plot on this frame
#    ntim - number of files used in precip accum before bucket is emptied
#NEW   if negative, do not print forecast hour (use for analyses)
#      NTIM DETAILS:
#        If you have forecast files containing 3h acum precip and you
#        want to plot 24h accumulation, set ntim to 8.  YOU NEED ALL 8
#        FORECAST FILES THAT REPRESENT THAT 24H PERIOD IN THE CONTROL FILE.
#        The code will plot the running total at each 3h interval,
#        then the 24h total when that point is reached, then empty the
#        precip bucket and continue with a new accumulation for any
#        files that are remaining.  If you don't want to accumulate
#        the precip, set ntim to 1 
#    clat - lat of center of plot frame (deg n)
#    clon - lon of center of plot frame (deg w)
#    npwe - number of filled eta grid points of plot frame domain in x dir
#    npsn - number of filled eta grid points of plot frame domain in y dir
#    llne - lat lon lines every X deg (if 0, none plotted)
#    spv  - special value, will not plot contours for values = spv
#    title2 - secondary title, good for experiment names
#
#   2nd line
#    parm - grib parameter number, see table 2 in ON388 (PDS OCTET 9)
#    lvlt - grib level type number, see table 3 in ON388 (PDS OCTET 10)
#    lvlv - grib level value number, see table 3 in ON388 (PDS OCTETS 11-12)
#    tr - grib time range indicator, see table 5 in ON388 (PDS OCTET 21)
#    title1 - primary title, good for names of variables in this frame
#    cint - contour interval, or,
#           FOR VECTORS - multiplier to change size of max wind vector
#           1.0 is normal (approx length between adjacent plotting points)
#           (0.0 will let code choose for contours or vectors) 
#    clow - minimum contour to plot, or
#           FOR VECTORS - number of FILLED grid points to skip in between
#               plotted vectors
#    cmax - maximum contour to plot (if clow=chi=0.0 code will choose)
#NEW        FOR VECTORS - magnitude (speed) of reference vector, the 
#NEW        largest vector to be plotted, ANYTHING LARGER WILL NOT BE PLOTTED.
#NEW        (0.0 will let code choose for each plot)
#    nhi  - plot H's and L's if 0, print all grid values if >0,
#             do nothing if <0
#    lw   - line width, 1000=normal
#           if lw=1, do a color fill instead of a contour plot
#    ndot - dash pattern control, a 10-bit number, if >0 all lines are 
#            dashed, if <0 only negative-valued contours are dashed,
#            if =0,1,or 1023 all lines are solid
#    W    - wind vector plotting flag, if 0 will do contour plot, if 1
#           will do vector plot only if U and V are both found
#
# Repeat this block for as many plot frames as you would like to see
# you can plot more than one frame, and more than one variable on
# a frame.  The example in this script plots sea level pressure, then
# 850 wind vectors and color filled temp overlayed on the next frame. 
# Two different forecast files are used.
#
#
# -1 in the time range parm is a wild card and will usually work
#  use 3 for time average and 0 for instantaneous
#
# COLORS USED FOR COLOR FILLS
#  COLORS MATCH THOSE USED IN GEMPAK
#  ONLY 32 COLORS MAY BE USED AT THIS TIME
#
#
#  INDEX  NAME              RED    GRN   BLU
#      1  VANILLA           255    228   220  bisque1                         
#      2  RED               255      0     0  red                             
#      3  GREEN               0    255     0  green                           
#      4  BLUE                0      0   255  blue                            
#      5  YELLOW            255    255     0  yellow                          
#      6  CYAN                0    255   255  cyan                            
#      7  MAGENTA           255      0   255  magenta                         
#      8  BROWN             139     71    38  sienna3                         
#      9  CORAL             255    130    71  sienna1                         
#     10  APRICOT           255    165    79  tan1                            
#     11  PINK              255    174   185  LightPink1                      
#     12  DKPINK            255    106   106  IndianRed1                      
#     13  MDVIOLET          238     44    44  firebrick2                      
#     14  MAROON            139      0     0  red4                            
#     15  FIREBRIC          205      0     0  red3                            
#     16  ORRED             238     64     0  OrangeRed2                      
#     17  ORANGE            255    127     0  DarkOrange1                     
#     18  DKORANGE          205    133     0  orange3                         
#     19  GOLD              255    215     0  gold1                           
#     20  DKYELLOW          238    238     0  yellow2                         
#     21  LWNGREEN          127    255     0  chartreuse1                     
#     22  MDGREEN             0    205     0  green3                          
#     23  DKGREEN             0    139     0  green4                          
#     24  GRPBLUE            16     78   139  DodgerBlue4                     
#     25  LTBLUE             30    144   255  DodgerBlue1                     
#     26  SKY                 0    178   238  DeepSkyBlue2                    
#     27  MDCYAN              0    238   238  cyan2                           
#     28  VIOLET            137    104   205  MediumPurple3                   
#     29  PURPLE            145     44   238  purple2                         
#     30  PLUM              139      0   139  magenta4                        
#     31  WHITE             255    255   255  white                           
#     32  BLACK               0      0     0  black                           
#     33  GREY97  97% GREY  (DARK)
#     34  GREY94  94% GREY                        
#     ....
#     63  GREY06   6% GREY 
#     64  GREY03   3% GREY  (LIGHT)
#  grid # 5
#    1    1     54.46    105.00   53   57    0  99999.99
#     ....
#  grid # 6
#    1    1     44.76    105.00   53   45    0  99999.99
#     ....
#  grid # 101
#    1    1     50.62    106.85  113   91    0  99999.99
#     ....
#  grid # 104
#    1    1     44.81    106.57  147  110    0  99999.99
#     ....
#  grid # 207
#    1    1     60.38    150.00   49   35    0  99999.99
#     ....
#  grid # 211
#    1    1     40.61    100.55   93   65    0  99999.99
#     ....
#  grid # 212
#    1    1     40.61    100.55  185  129    0  99999.99
#     ....
#  grid # 215
#    1    1     40.61    100.55  369  257    0  99999.99
#     ....
#  grid # 216
#    1    1     59.65    155.34  139  107    0  99999.99
#     ....
