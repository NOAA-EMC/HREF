#! /bin/ksh
# @ step_name = wrfsi
# @ output = /emc2/wx20py/test.out
# @ error = /emc2/wx20py/test.out
# @ notification = never
# @ group=devonprod
# @ arguments = cent4km_rerun2.grd
# @ wall_clock_limit = 00:29:00
# @ job_type = serial
# @ class = dev
# @ queue

. ~/.profile

# indir=/emc2/wx20py/wrf_nmm/westnmm/output/2004090606
indir=/emc2/wx20py/FRESHWRF/west10/output/2004090606
# indir=/emc2/wx20py/wrf_nmm/centnmm/output/2004040812_latest_dtcrel
# indir=/emc2/wx20py/wrf_nmm/eastnmm/output/2004042018_rerun3
# indir=/emc2/wx20py/wrf_nmm/centnmm_netcdf/output/2004060412
# indir=/ptmp/wx20py/2004020512_normphy

outfile=$1

# hrs="00 02 04 06 08 10 12 14 16 18 20 22 24 26 28 30 32 34 36 38 40"
# hrs="00 03 06 09 12 15 18 21 24 27 30 33 36 39 42 45 48"
# hrs="00 01 02 03 04 05 06 07 08 09 10 11 12"
# hrs="00 03 06 09 12 15 18 21 24 27"
# hrs="00 03 06 09 12 15 18 21 24 30 33 36 39 42 45 48" 
# hrs="00 03 06 09 12 15 18 21" 

hrs="00 03 06"

# hrs="00 06 12 18 24 27 30" 
# hrs="00 03 06 09 12 15 18 21 24" 

workdir=/ptmp/wx20py/
# workdir=/gpfstmp/wx20py/wrfpost_nmmtest_test_bc

# cp grdnav.tbl $workdir

cd $workdir

rm $outfile

for hr in $hrs

do


rm WRFPRS${hr}.tm00

# cat $indir/wrf.EAST08${hr}.tm00 $indir/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00
# cat $indir/wrf.EMEST${hr}.tm00 $indir/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00
# cat $indir/wrf.CENT04${hr}.tm00 $indir/SPCPCP${hr}.tm00 > WRFPRS${hr}.tm00
# cat $indir/wrf.CENT08${hr}.tm00 $indir/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00
# cat $indir/wrf.AK08${hr}.tm00 $indir/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00
# cat $indir/wrf.WEST08${hr}.tm00 $indir/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00
cat $indir/wrf.EMWST${hr}.tm00 $indir/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00

# cp $indir/wrf.CENT04${hr}.tm00 WRFPRS${hr}.tm00

nagrib << endgrib
 GBFILE   = WRFPRS${hr}.tm00
 INDXFL   =
 GDOUTF   = $outfile
 PROJ     =
 GRDAREA  =
 KXKY     =
 MAXGRD   = 4999
 CPYFIL   = GDS
 GAREA    = dset
 OUTPUT   = T
 GBTBLS   = 
 GBDIAG   =
 PDSEXT   = NO

r

ex

endgrib

done

gpend
