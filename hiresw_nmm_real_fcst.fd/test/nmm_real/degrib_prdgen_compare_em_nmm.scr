#! /bin/ksh
# @ step_name = wrfsi
# @ output = /emc2/wx20py/test.out
# @ error = /emc2/wx20py/test.out
# @ notification = never
# @ group=devonprod
# @ arguments = 2004020512_nmmwrf_altphy.grd 2004020512_emwrf.grd
# @ wall_clock_limit = 00:35:00
# @ job_type = serial
# @ class = dev
# @ queue

. ~/.profile

outfile1=$1
outfile2=$2

hrs="00 03 06 09 12 15 18 21 24"

indir1=/emc2/wx20py/wrf_nmm/centnmm/output/2004020512
indir2=/emc2/wx20py/FRESHWRF/cent10/output/2004020512

workdir=/ptmp/wx20py/

cd $workdir

rm $outfile1
rm $outfile2

for hr in $hrs

do

rm WRFPRS${hr}.tm00

cat $indir1/wrf.CENT08${hr}.tm00 $indir1/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00

nagrib << endgrib
 GBFILE   = WRFPRS${hr}.tm00
 INDXFL   =
 GDOUTF   = $outfile1
 PROJ     =
 GRDAREA  =
 KXKY     =
 MAXGRD   = 4999
 CPYFIL   = GDS
 GAREA    = dset
 OUTPUT   = T
 GBTBLS   = 
 GBDIAG   =
 PDSEXT   = NO

r

ex

endgrib

rm  WRFPRS${hr}.tm00
cat $indir2/wrf.EMCEN${hr}.tm00 $indir2/WRFPCP${hr}.tm00 > WRFPRS${hr}.tm00

nagrib << endgrib2
 GBFILE   = WRFPRS${hr}.tm00
 INDXFL   =
 GDOUTF   = $outfile2
 PROJ     =
 GRDAREA  =
 KXKY     =
 MAXGRD   = 4999
 CPYFIL   = GDS
 GAREA    = dset
 OUTPUT   = T
 GBTBLS   =
 GBDIAG   =
 PDSEXT   = NO

r

ex

endgrib2

done

gpend
